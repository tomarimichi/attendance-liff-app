<!DOCTYPE html>
<html lang="ja">
<head>
  <!--テスト用　後で消す-->
    <meta name="last-updated" content="2026/01/22 11:02">

  <!-- GAS_URL -->
  <script>
    const GAS_URL ='https://script.google.com/macros/s/AKfycbw3GJhdeVCi7WRnKVr3EeLArl2yU5nciv_HGeY4I_sCjH5IUKuQeJq2ZCG0atys3liJ/exec';
  </script>
  


  <meta charset="utf-8">

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <title>欠席・遅刻連絡</title>
  <link rel="stylesheet" href="css/style.css">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


</head>

<body>
  <main class="container">
    <!--テスト用　後で消す-->
      <h1>本番環境</h1>
      <p id="update-time">更新時間・読み込み中...</p>

    <h3>欠席・遅刻連絡フォーム</h3>

    <form id="absenceForm" onsubmit="submitAbsence(); return false;">

      <div class="form-field">
        <label for="absentDate" class="required">欠席・遅刻日</label>
        <input type="date" id="absentDate" name="absentDate" required>
      </div>

      <label for="reason" class="required">欠席・遅刻理由</label>
      <select id="reason" name="reason" required>
        <option value="" selected disabled>選択してください</option><!--初期値-->
        <option value="体調不良">体調不良</option>
        <option value="通院">通院</option>
        <option value="私用">私用</option>
      </select>

      <!--
      <label for="details">詳細（症状など）</label>
      旧バージョン　自由記入型
        <textarea id="details" name="details" rows="2" placeholder="発熱・頭痛など自由記入"></textarea>
      -->

      <div id="visitStatusBlock" style="display: none;">
        <label for="visitStatus" class="required">通院有無・予定</label>
        <select id="visitStatus" name="visitStatus">
          <option value="" selected disabled>選択してください</option>
          <option value="なし">予定なし</option>
          <option value="あり">受診予定あり</option>
          <option value="済み">受診済み</option>
        </select>
      </div>

      <div id="departmentBlock" style="display: none;">
        <label for="department" class="required">受診科</label>
        <select id="department" name="department" multiple>
          <option value="内科">内科</option>
          <option value="外科">外科</option>
          <option value="心療内科">心療内科</option>
          <!-- 仮でOK -->
        </select>
      </div>


      <div class="form-field">
        <label for="nextDate" class="required">次回通所予定日</label>
        <input type="date" id="nextDate" name="nextDate" class="absentDate-input" required>
      </div>
      <div class="form-field">
        <label for="nextTime">遅刻予定（時刻が分かる場合）</label>
        <input type="time" id="nextTime" name="nextTime" class="time-input">
      </div>
      <button type="submit" id="sendBtn">>送信</button>
    </form>
    
    <!--プログレスバー-->
    <div id="progress" style="width: 0%; height: 6px; background: #e0e0e0; margin: 10px 0; border-radius: 3px; overflow: hidden;">
      <div style="height: 100%; width: 0%; background: linear-gradient(90deg, #007bff, #00d4ff); transition: width 4s linear;"></div>
    </div>





  </main>

  <!--テスト：時間表示用(後で消す)-->
    <script>
      // GitHub Pages最終更新日自動取得
      document.addEventListener('DOMContentLoaded', function() {
        const updateTime = document.getElementById('update-time');
        if (updateTime) {
          // GitHub Pagesのメタタグから最終更新取得
          const meta = document.querySelector('meta[name="last-updated"]');
          if (meta && meta.content) {
            updateTime.textContent = `最終更新・${meta.content}`;
          } else {
            // フォールバック：ビルド日時（手動更新不要）
            const now = new Date(Date.UTC(2026, 0, 9, 11, 10)); // JST+9考慮
            updateTime.textContent = `最終更新・${now.toLocaleString('ja-JP', {timeZone: 'Asia/Tokyo'})}`;
          }
        }
      });
    </script>


  <script src="js/app.js"></script>
</body>
</html>
